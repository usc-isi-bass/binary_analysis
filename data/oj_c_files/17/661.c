#include <ctype.h>
#include <errno.h>
#include <float.h>
#include <iso646.h>
#include <limits.h>
#include <locale.h>
#include <math.h>
#include <setjmp.h>
#include <signal.h>
#include <stdarg.h>
#include <stddef.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

int main()
{
	char c,a[105]={'\0'},sign[105]={'\0'};//a??????????sign??????????
	int length,i,j;
	cin.getline(a,101,'\n');
	while(a[0]!='\0')
	{
		length=strlen(a);
		cout<<a<<endl;//?????a????
		for(i=0;i<length;i++)
		{
			if(a[i]!=')')//???????????????????
				continue;
			else if(i>0)
			{
				j=i-1;
				while(j>=0&&a[j]!='(')//??????????
					j--;
				if(a[j]=='(')
				{
					a[i]='\0';
					a[j]='\0';
				}
			}
		}
		for(i=0;i<length;i++)//???????????
		{
			if(a[i]=='(')
				sign[i]='$';
			else
			{
				if(a[i]==')')
					sign[i]='?';
				else
					sign[i]=' ';
			}
		}
		cout<<sign;//??????????
		for(i=0;i<105;i++)//a???sign?????
		{
			a[i]='\0';
			sign[i]='\0';
		}
		cin.getline(a,101,'\n');//??????????????????a???‘\0‘???????
		if(a[0]!='\0')
			cout<<endl;
	}
	return 0;
}